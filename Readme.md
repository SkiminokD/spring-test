# О программе

Данное тестовое микросервисное веб-приложение написано в ходе чтения книги автора Moisés Macero García "Learn Microservices with Spring Boot".

Приложение представляет собой платформу для тренировки умственных способностей человека путем перемножения в уме двузначных чисел. 
Для большей эффективности тренировок предполагается, что пользователь должен посещять страницу хотя бы раз в день.

При первом посещении страницы программа случайным образом генерирует два двузначных числа, которые предлагается посетителю перемножить. 
Ответ посетитель записывает в отдельное поле ввода. 

Для просмотра истории своих попыток, пользователю предлагается указывать своё имя при каждом входе на страницу. История попыток подгружается автоматически 
при отправке новых сведений на сервер.

За успешное решение задач пользователю начисляются очки. За очки пользователям выдаются значки. 
Также в системе ведется список лидеров.

# Структура проекта

Проект состоит из двух подпроектов, оформленных в виде подмодулей:
* фронтенд;
* бэкенд в виде микросервиса multiplication;
* бэкенд в виде микросервиса gamification.

Фронтенд написан на React. Фронтенд представляет собой минимальное приложение, достаточное для тестирования бэкенда. В связи с этим он реализован на классовых компонентах,в нем
не используется Redux, написан на TypeScript но с расширением файлов js, нет юнит-тестов, а адреса и порты бэкенда вообще заданы константами, вместо вынесения их в .env файлы. 
Приведение фронтенда в порядок в виде задачи не ставилось.

Бэкенд написан на Spring, с использованием Spring Boot. В качестве базы данных используется H2.
Микросервис multiplication отвечает за самую главную функциональность проекта - генерацию заданий, ведение пользователей, ведение истории попыток.
Микросервис gamification отвечает за начисление очков, значков и ведение списка лидеров.
# Требования

Для работы приложения необходимо установить:
* Java 17
* NodeJS 12 или новее

Для работы приложение использует следующие порты:
* 8080 порт для сервиса multiplication;
* 8081 порт для сервиса gamification;
* 3000 порт для фронтенда (порт для работы не критичен: в случае, если порт занят, выберется ближайший свободный)

Внимание! Порт 8081 сервиса gamification прописан не только в application.properties проекта gamification, но и в application.properties проекта multiplication!
В системе отсутствует gateway, поэтому в текущей версии приложения фронтенд обращается напрямую к обоим сервисам.

Для работы базы данных в домашней директории пользователя, от чьего имени запускается бэкенд, будут созданы базы данных multiplication3 и gamification. 
Соответственно, посторонние одноименные файлы multiplication3.mv.db, multiplication3.trace.db, gamification.mv.db перед первым запуском должны отсутствовать в домашней директории пользователя.

# Запуск приложения

Для запуска приложения необходимо:

1. Скачать git-подмодули, выполнив команды:

```
git submodule init
git submodule update
```

2. Запустить бэкенд. Для этого в каталоге multiplication и отдельно в каталоге gamification необходимо выполнить команду:

```
./mvnw spring-boot:run
```

3. В каталоге frontend выполнить команды:

```
npm i
npm start
```
